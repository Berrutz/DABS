# Remote deployment overlay — uses host networking so containers see the
# OS-level Tailscale interface directly (no Docker sidecar needed).
#
# Machine A (main) — 100.84.182.11:
#   docker compose -f docker-compose.yml -f docker-compose.remote.yml --profile main up -d --build
#
# Machine B (agents) — 100.96.79.2:
#   docker compose -f docker-compose.yml -f docker-compose.remote.yml --profile agent up -d

services:
  jade-main:
    network_mode: host

  jade-agent:
    network_mode: host

  user-ui:
    network_mode: host
    environment:
      QUERY_HOST: "localhost"
      FRONT_HOST: "localhost"

  parser:
    network_mode: host
    environment:
      FRONT_HOST: "localhost"

  logic:
    network_mode: host
    environment:
      FRONT_HOST: "localhost"

  query:
    network_mode: host
    environment:
      FRONT_HOST: "localhost"
